* количества приборов в узлах
Uz_1 	STORAGE 1;
Uz_2 	STORAGE 2;
Uz_3 	STORAGE 3;

* время ожиданий в узлах
tw_1 	QTABLE 1,0,1,20
tw_2 	QTABLE 2,0,1,20
tw_3 	QTABLE 3,0,1,20

* среднее время обслуживания в узлах
t_b1 EQU 4
t_b2 EQU 2.5
t_b3 EQU 14

* время пребывания в сети
t_u 	TABLE M1,40,40,30

*************************** модель *****************************
	GENERATE ,,,10	; начальное число заявок в СеМО

Met_0	MARK		; отметка момента времени поступления заявки в сеть

Met_1 	QUEUE 1		; регистрация момента поступления заявки в очередь узла 1
	ENTER Uz_1	; попытка занять один из приборов узла 1
	DEPART 1
	ADVANCE (Exponential(66,0,t_b1))
	LEAVE Uz_1
	TRANSFER 0.5,Met_3	; передача транзакта с вероятностью 0.5 в узел 3
	TRANSFER 0.5,Met_2	; передача транзакта с вероятностью 0.25 в узел 2 (при том что транзакт уже не пошел в узел 3)

	TABULATE T_U	; проход через "0"
	TRANSFER ,Met_0	; безусловная передача транзакта в узел 1

Met_2 	QUEUE 2		; регистрация момента поступления заявки в очередь узла 2
	ENTER Uz_2	; попытка занять один из приборов узла 2
	DEPART 2
	ADVANCE (Exponential(66,0,t_b2))
	LEAVE Uz_2
	TRANSFER ,Met_1	; безусловная передача транзакта в узел 1

Met_3 	QUEUE 3		; регистрация момента поступления заявки в очередь узла 3
	ENTER Uz_3	; попытка занять один из приборов узла 3
	DEPART 3
	ADVANCE (Exponential(77,0,t_b3))
	LEAVE Uz_3
	TRANSFER ,Met_1	; безусловная передача транзакта в узел 1


GENERATE 10000000		; задание длительности моделирования
TERMINATE 1		; уменьшение счетчика завершения на 1
